<section class="rounded-lg">
  <h2 class="text-black">
    <span class="text-[var(--main-color)] md:text-[30px]">Cart</span> :
    {{ cartList.products?.length }} Items
  </h2>
  <div class="container">
    <div class="grid grid-cols-12 gap-4">
      <div class="col-span-12 md:col-span-7">
        @for (item of cartList.products ; track $index) {
        <section
          class="relative main-section bg-white p-0 flex items-center gap-5 rounded-lg mb-3 justify-between"
        >
          <!-- <span
            class="pointer-events-none absolute inset-0 border-0 rounded-lg border-[var(--second-color)] shadow-[0_0_2px_var(--second-color),0_0_14px_var(--second-color)]"
          ></span> -->
          <div class="flex items-center gap-5 space-x-5">
            <img
              src="{{ item.product.imageCover }}"
              class="w-[100px]"
              alt="{{ item.product.title }}"
            />
            <div class="flex items-center gap-5">
              <div class="flex flex-col space-y-2 justify-center">
                <p class="text-[var(--text-color)]">{{ item.product.title }}</p>
                <div
                  class="bg-[var(--bg-color)] border-2 border-gray-300 rounded-lg flex justify-between md:w-[150px] items-center"
                >
                  <button
                    (click)="updateCount(item.product._id, item.count - 1)"
                    class="btn shadow-none text-black bg-[var(--bg-color)] border-0 rounded-lg hover:bg-white m-0"
                  >
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <span class="text-black"> {{ item.count }} </span>
                  <button
                    (click)="updateCount(item.product._id, item.count + 1)"
                    class="btn shadow-none text-black bg-[var(--bg-color)] border-0 rounded-lg hover:bg-white m-0"
                  >
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
              <span
                (click)="removeItem(item.product._id)"
                class="cursor-pointer mt-auto"
                ><i
                  class="fa-solid fa-trash text-2xl text-[var(--main-color)] hover:text-[var(--error)] transition"
                ></i
              ></span>
            </div>
          </div>
          <p class="text-xl me-3">{{ item.price }} EGP</p>
        </section>
        <hr class="my-10" />
        }
        <!-- todo Here -->
        <div
          class="w-full p-4 rounded-xl border-2 border-[var(--main-color)] bg-[#8B5E3542] text-black my-5"
        >
          <span class="flex"
            ><svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M20.3992 9.14587L21.1194 9.86587C21.6897 10.4259 21.9998 11.1859 21.9998 11.9859C22.0098 12.7859 21.6997 13.5469 21.1395 14.1159C21.1328 14.1232 21.1261 14.1296 21.1194 14.1361C21.1161 14.1393 21.1128 14.1425 21.1094 14.1459L20.3992 14.8559C20.1191 15.1359 19.959 15.5159 19.959 15.9169V16.9459C19.959 18.6059 18.6085 19.9569 16.9479 19.9569H15.9176C15.5174 19.9569 15.1373 20.1159 14.8572 20.3959L14.1369 21.1159C13.5467 21.7069 12.7764 21.9959 12.0061 21.9959C11.2359 21.9959 10.4656 21.7069 9.87537 21.1269L9.14511 20.3959C8.865 20.1159 8.48487 19.9569 8.08472 19.9569H7.05435C5.39375 19.9569 4.04326 18.6059 4.04326 16.9459V15.9169C4.04326 15.5159 3.8832 15.1359 3.6031 14.8459L2.88284 14.1359C1.71241 12.9669 1.70241 11.0559 2.87283 9.87687L3.6031 9.14587C3.8832 8.86587 4.04326 8.48587 4.04326 8.07587V7.05587C4.04326 5.39587 5.39375 4.04687 7.05435 4.04687H8.08472C8.48487 4.04687 8.865 3.88587 9.14511 3.60587L9.86537 2.88587C11.0358 1.70687 12.9465 1.70687 14.1269 2.87687L14.8572 3.60587C15.1373 3.88587 15.5174 4.04687 15.9176 4.04687H16.9479C18.6085 4.04687 19.959 5.39587 19.959 7.05587V8.08687C19.959 8.48587 20.1191 8.86587 20.3992 9.14587ZM9.42521 15.4459C9.66529 15.4459 9.88537 15.3559 10.0454 15.1859L15.1873 10.0469C15.5274 9.70687 15.5274 9.14587 15.1873 8.80587C14.8472 8.46687 14.297 8.46687 13.9569 8.80587L8.81499 13.9459C8.47486 14.2859 8.47486 14.8459 8.81499 15.1859C8.97504 15.3559 9.19512 15.4459 9.42521 15.4459ZM13.6968 14.5659C13.6968 15.0559 14.0869 15.4459 14.5771 15.4459C15.0572 15.4459 15.4474 15.0559 15.4474 14.5659C15.4474 14.0869 15.0572 13.6959 14.5771 13.6959C14.0869 13.6959 13.6968 14.0869 13.6968 14.5659ZM9.43521 8.55587C9.91539 8.55587 10.3055 8.94587 10.3055 9.42587C10.3055 9.91687 9.91539 10.3059 9.43521 10.3059C8.95504 10.3059 8.55489 9.91687 8.55489 9.42587C8.55489 8.94587 8.95504 8.55587 9.43521 8.55587Z"
                fill="#8B5E35"
              />
            </svg>
            10% Instant Discount with Federal Bank Debit Cards on a min spend of
            $150. TCA
          </span>
        </div>
      </div>
      <div
        class="col-span-12 md:col-span-4 space-y-8 main-section text-black bg-white h-fit"
      >
        <h3 class="text-[var(--text-color)] text-[24px]">Order Summary</h3>
        <div class="flex justify-between">
          <div class="space-y-5 text-[var(--text-color)]">
            <h3>Price:</h3>
            <p>Discount</p>
            <p>Shipping:</p>
            <p>Coupon Applied:</p>
          </div>
          <div class="space-y-5 text-[var(--text-color)]">
            <p>{{ cartList.totalCartPrice }} EGP</p>
            <p>2000</p>
            <p class="text-[var(--main-color)]">Free</p>
            <p class="text-[var(--main-color)]">0.00 EGP</p>
          </div>
        </div>
        <hr class="w-[80%] m-auto" />
        <figcaption class="flex justify-between mt-5">
          <div class="space-y-5">
            <p>TOTAL:</p>
            <p>Estimated Delivery By</p>
          </div>
          <div class="space-y-5">
            <p>{{ cartList.totalCartPrice }} EGP</p>
            <p>{{ cartList.createdAt | date : "yyyy-MM-dd" }}</p>
          </div>
        </figcaption>
        <div class="relative w-[300px] m-auto mb-5">
          <input
            type="text"
            class="main-inputs p-3"
            placeholder="Coupon Code"
          />
          <div class="absolute bt top-1 right-2">
            <button class="main-btn rounded-2xl">Apply</button>
          </div>
        </div>
        <div class="m-auto text-center">
          <button
            [routerLink]="['/checkout', cartList._id]"
            class="main-btn w-full rounded-3xl bg-[var(--second-color)] text-white hover:bg-white hover:text-[var(--second-color)] hover:border-[var(--second-color)]"
          >
            Procced To CheckOut
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
